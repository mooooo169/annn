<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8" />
    <title>ØºØ²ÙˆØ© Ø§Ù„Ø®Ù†Ø¯Ù‚ - Ø®Ø±ÙŠØ·Ø© ØªÙØ§Ø¹Ù„ÙŠØ©</title>
    <!-- Font Awesome Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„Ø´Ù…Ø³ ÙˆØ§Ù„Ù‚Ù…Ø± -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css ">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f4f4f4;
            color: #333;
            direction: rtl;
            min-height: 100vh;
            transition: all 0.3s ease;
        }

        /* Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ */
        body.dark-mode {
            background-color: #121212;
            color: #eee;
        }
        body.dark-mode section {
            background-color: #1e1e1e;
            color: #eee;
        }
        body.dark-mode .popup {
            background-color: #2c2c2c;
            color: #eee;
            border-color: #555;
        }
        body.dark-mode .popup h3 {
            color: #ddd;
        }
        body.dark-mode .popup p {
            color: #aaa;
        }
        body.dark-mode .tour-btn,
        body.dark-mode .map-btn,
        body.dark-mode .download-btn,
        body.dark-mode .dark-mode-btn {
            background-color: #333;
            color: white;
        }
        body.dark-mode canvas {
            background-color: #222;
        }

        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… */
        .tour-btn, .map-btn, .download-btn, .dark-mode-btn {
            position: fixed;
            z-index: 9999;
            background-color: #e67e22;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
            transition: transform 0.3s ease;
        }
        .tour-btn:hover,
        .map-btn:hover,
        .download-btn:hover,
        .dark-mode-btn:hover {
            background-color: #d35400;
            transform: scale(1.05);
        }
        .tour-btn { top: 20px; left: 20px; }
        .map-btn { top: 80px; left: 20px; }
        .download-btn { top: 140px; left: 20px; }
        .dark-mode-btn { top: 200px; left: 20px; background-color: #34495e; }

        /* Ø²Ø± Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø¹Ù„Ù‰ */
        #backToTop {
            display: none;
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 9999;
            font-size: 18px;
            background-color: #e67e22;
            color: white;
            border: none;
            padding: 12px 15px;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
            transition: background-color 0.3s ease;
        }
        #backToTop:hover {
            background-color: #d35400;
        }

        /* Ø§Ù„Ø®Ø±ÙŠØ·Ø© */
        canvas {
            display: block;
            margin: 20px auto;
            background: #ecf0f1;
            border: 2px solid #ccc;
            transition: background-color 0.3s ease;
        }

        #map-container {
            text-align: center;
            display: none;
        }

        /* Ù†ØµÙˆØµ Ù…ØªØ­Ø±ÙƒØ© */
        .fade-in {
            opacity: 0;
            animation: fadeIn 1s forwards;
        }
        @keyframes fadeIn {
            to {
                opacity: 1;
            }
        }

        /* Popup Ù„Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª */
        .popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border: 2px solid #333;
            border-radius: 8px;
            padding: 20px;
            width: 300px;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10000;
            display: none;
            transition: background-color 0.3s, color 0.3s;
        }
        .popup h3 {
            margin-bottom: 10px;
            color: #2c3e50;
        }
        .popup p {
            font-size: 14px;
            color: #555;
        }
        .popup .close-btn button {
            background-color: #e67e22;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
        }

        /* Ø§Ù„Ù…Ù‚Ø§Ø·Ø¹ */
        section {
            padding: 60px 20px;
            text-align: center;
            background-color: #fff;
            border-bottom: 1px solid #ddd;
            opacity: 0;
            transform: translateY(30px);
            transition: all 1s ease;
        }
        section.active {
            opacity: 1;
            transform: translateY(0);
        }
        section h2 {
            font-size: 28px;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        section p {
            max-width: 600px;
            margin: auto;
            font-size: 18px;
            color: #555;
        }

        /* Ø¬Ø¯ÙˆÙ„ Ø§Ù„ÙØ±ÙŠÙ‚ */
        table {
            margin: auto;
            border-collapse: collapse;
            width: 70%;
            text-align: center;
            margin-top: 30px;
        }
        th, td {
            border: 1px solid #999;
            padding: 12px;
        }
        thead {
            background-color: #e67e22;
            color: white;
        }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ ÙˆØ§Ù„ØªØ°ÙƒÙŠØ± */
        .notification {
            text-align: center;
            margin: 10px 0;
        }
        .notification strong {
            color: red;
            font-size: 18px;
        }
        .reminder {
            margin-top: 10px;
            font-size: 16px;
            color: #dd2828;
        }
    </style>
</head>
<body>

    <!-- Ø£Ø²Ø±Ø§Ø± -->
    <button class="tour-btn" onclick="startTour()">Ø§Ù„Ø®Ø±ÙŠØ·Ù‡ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©</button>
    <button class="map-btn" onclick="toggleMap()">Ø¹Ø±Ø¶ Ø§Ù„Ø®Ø±ÙŠØ·Ø©</button>
    <button class="download-btn" onclick="downloadMap()">ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ø®Ø±ÙŠØ·Ø©</button>
    <button class="dark-mode-btn" onclick="toggleDarkMode()">
        <i class="fas fa-moon"></i> <span>Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ</span>
    </button>

    <!-- Ø²Ø± Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø¹Ù„Ù‰ -->
    <button id="backToTop" title="Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø¹Ù„Ù‰">â†‘</button>

    <!-- Canvas Ø§Ù„Ø®Ø±ÙŠØ·Ø© -->
    <div id="map-container" class="fade-in">
        <h2 style="margin-top: 20px;">Ø®Ø±ÙŠØ·Ø© ØºØ²ÙˆØ© Ø§Ù„Ø®Ù†Ø¯Ù‚ Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠÙ‡</h2>

        <!-- ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠØ© -->
        <div class="notification">
            <strong>âš ï¸ ØªÙ†Ø¨ÙŠÙ‡:</strong>
            <p>Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø±ÙŠØ·Ø© ØªÙ…Ø«ÙŠÙ„ÙŠØ© ÙˆØªÙ‚Ø±ÙŠØ¨ÙŠØ© Ù„ØºØ²ÙˆØ© Ø§Ù„Ø®Ù†Ø¯Ù‚ ÙˆÙ„Ù‚Ø¯ ØªÙ… ØªØµÙ…ÙŠÙ…Ù‡Ø§ Ù„Ø£ØºØ±Ø§Ø¶ ØªØ¹Ù„ÙŠÙ…ÙŠØ© ÙÙ‚Ø·ØŒ ÙˆÙ‡ÙŠ Ù„ÙŠØ³Øª Ø®Ø±ÙŠØ·Ø© ØªØ§Ø±ÙŠØ®ÙŠØ© Ø¯Ù‚ÙŠÙ‚Ø©.</p>
        </div>

        <!-- Canvas Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ù†ÙØ³Ù‡Ø§ -->
        <canvas id="battleMap" width="1000" height="700"></canvas>

        <!-- ØªØ°ÙƒÙŠØ± Ø¨Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø© -->
        <p class="reminder">
            ğŸ” <strong>ØªØ°ÙƒÙŠØ±:</strong> Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø£ÙŠ Ø¬Ø²Ø¡ Ù…Ù† Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ù„ØªØ¸Ù‡Ø± Ù„Ùƒ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø­ÙˆÙ„ ØªÙ„Ùƒ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©.
        </p>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Popup Ù„Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª -->
    <div class="popup" id="infoPopup">
        <h3 id="popupTitle">Ø§Ù„Ø¹Ù†ØµØ±</h3>
        <p id="popupText">ØªÙØ§ØµÙŠÙ„ Ø¹Ù† Ø§Ù„Ø¹Ù†ØµØ±...</p>
        <div class="close-btn">
            <button onclick="document.getElementById('infoPopup').style.display = 'none'">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
    </div>

    <!-- Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø¬ÙˆÙ„Ø© -->
    <section id="intro">
        <h2>Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ø§Ù„Ø®Ø±ÙŠØ·Ù‡ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©</h2>
        <p>ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„ØªÙ…Ø«ÙŠÙ„ Ø§Ù„Ø¨ØµÙ„ÙŠ Ù„ØºØ²ÙˆØ© Ø§Ù„Ø®Ù†Ø¯Ù‚ØŒ Ø³ØªØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø³Ø¬Ø¯ Ø§Ù„Ù†Ø¨ÙˆÙŠ ÙˆØ§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø© ÙˆØ§Ù„Ø¬Ø¨Ø§Ù„ Ø§Ù„ØªÙŠ ÙƒØ§Ù†Øª ØªØ­Ø¯Ù‡Ø§ Ù…Ù† Ø«Ù„Ø§Ø« Ø¬Ù‡Ø§ØªØŒ Ø¨ÙŠÙ†Ù…Ø§ ÙƒØ§Ù† Ø§Ù„Ø®Ù†Ø¯Ù‚ ÙŠØ­Ù…ÙŠ Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø© Ù…Ù† Ø¬ÙŠØ´ Ø§Ù„Ù…Ø´Ø±ÙƒÙŠÙ†.</p>
    </section>
    <section id="mountains">
        <h2>Ø§Ù„Ø¬Ø¨Ø§Ù„ Ø§Ù„Ù…Ø­ÙŠØ·Ø©</h2>
        <p>ÙƒØ§Ù†Øª Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø© Ù…Ø­Ø§Ø·Ø© Ø¨Ø§Ù„Ø¬Ø¨Ø§Ù„ Ù…Ù† Ø§Ù„Ø¬Ù‡Ø§Øª Ø§Ù„Ø´Ø±Ù‚ÙŠØ© ÙˆØ§Ù„ØºØ±Ø¨ÙŠØ© ÙˆØ§Ù„Ø¬Ù†ÙˆØ¨ÙŠØ©ØŒ Ù…Ù…Ø§ Ø³Ø§Ø¹Ø¯ ÙÙŠ Ø­Ù…Ø§ÙŠØªÙ‡Ø§ Ø¨Ø´ÙƒÙ„ Ø·Ø¨ÙŠØ¹ÙŠØŒ ÙˆÙƒØ§Ù† Ø§Ù„Ø®Ù†Ø¯Ù‚ Ù‡Ùˆ Ø§Ù„Ø­ØµÙ† Ø§Ù„ÙˆØ­ÙŠØ¯ Ø§Ù„Ø°ÙŠ ØªÙ… Ø­ÙØ±Ù‡ ÙÙŠ Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©.</p>
    </section>
    <section id="mosque">
        <h2>Ø§Ù„Ù…Ø³Ø¬Ø¯ Ø§Ù„Ù†Ø¨ÙˆÙŠ</h2>
        <p>ÙƒØ§Ù† Ø§Ù„Ù…Ø³Ø¬Ø¯ Ø§Ù„Ù†Ø¨ÙˆÙŠ Ù…Ø±ÙƒØ² Ø§Ù„Ù‚Ø±Ø§Ø± Ø®Ù„Ø§Ù„ Ø§Ù„ØºØ²ÙˆØ©ØŒ Ø­ÙŠØ« Ø§Ø¬ØªÙ…Ø¹ Ø§Ù„Ù…Ø³Ù„Ù…ÙˆÙ† ÙÙŠÙ‡ ÙˆØ§Ø³ØªØ´Ø§Ø±ÙˆØ§ Ø§Ù„Ù†Ø¨ÙŠ Ù…Ø­Ù…Ø¯ ï·º Ø­ÙˆÙ„ ÙƒÙŠÙÙŠØ© Ù…ÙˆØ§Ø¬Ù‡Ø© Ø¬ÙŠØ´ Ø§Ù„Ù…Ø´Ø±ÙƒÙŠÙ†.</p>
    </section>
    <section id="trench">
        <h2>Ø­ÙØ± Ø§Ù„Ø®Ù†Ø¯Ù‚</h2>
        <p>Ø§Ù‚ØªØ±Ø­ Ø³Ù„Ù…Ø§Ù† Ø§Ù„ÙØ§Ø±Ø³ÙŠ ÙÙƒØ±Ø© Ø­ÙØ± Ø§Ù„Ø®Ù†Ø¯Ù‚ ÙÙŠ Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ© Ù„Ù„Ù…Ø¯ÙŠÙ†Ø©ØŒ ÙˆÙ‡Ùˆ Ù…Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…Ø¹Ø±ÙˆÙÙ‹Ø§ Ø¹Ù†Ø¯ Ø§Ù„Ø¹Ø±Ø¨ Ø¢Ù†Ø°Ø§ÙƒØŒ ÙˆÙ‚Ø¯ Ø³Ø§Ø¹Ø¯ Ù‡Ø°Ø§ Ø§Ù„Ø®Ù†Ø¯Ù‚ ÙÙŠ ØµØ¯ Ù‡Ø¬Ù…Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙƒÙŠÙ†.</p>
    </section>
    <section id="enemy">
        <h2>Ø¬ÙŠØ´ Ø§Ù„Ù…Ø´Ø±ÙƒÙŠÙ†</h2>
        <p>Ø¬Ø§Ø¡ Ø¬ÙŠØ´ Ø§Ù„Ù…Ø´Ø±ÙƒÙŠÙ† Ø¨Ù…Ø§ ÙŠÙ‚Ø§Ø±Ø¨ Ø§Ù„Ø¹Ø´Ø±Ø© Ø¢Ù„Ø§Ù Ù…Ù‚Ø§ØªÙ„ØŒ Ù„ÙƒÙ† Ø§Ù„Ø®Ù†Ø¯Ù‚ Ø­Ø§Ù„ Ø¯ÙˆÙ† Ø¯Ø®ÙˆÙ„Ù‡Ù… Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©ØŒ ÙˆØ¨Ø¹Ø¯ Ø£ÙŠØ§Ù… Ù…Ù† Ø§Ù„Ø­ØµØ§Ø±ØŒ Ø£Ø±Ø³Ù„ Ø§Ù„Ù„Ù‡ Ø±ÙŠØ­Ø§Ù‹ Ø´Ø¯ÙŠØ¯Ø© ÙØ´ØªØª ÙƒÙŠØ¯Ù‡Ù… ÙˆÙ‡Ø²Ù…Ù‡Ù….</p>
    </section>

    <!-- Ù‚Ø³Ù… ÙØ±ÙŠÙ‚ Ø§Ù„Ø¹Ù…Ù„ -->
    <section id="team" style="margin-top: 40px;">
        <h2>Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ† Ø¨Ø§Ù„Ù…Ø´Ø±ÙˆØ¹: </h2>
        <table border="1">
            <thead>
                <tr>
                    <th>Ø§Ù„Ø±Ù‚Ù…</th>
                    <th>Ø§Ù„Ø§Ø³Ù…</th>
                </tr>
            </thead>
            <tbody>
                <tr><td>Ù¡</td><td>Ù…Ù‡Ù†Ø¯ Ø¹Ø¨Ø¯ Ø§Ù„Ø­ÙƒÙŠÙ… Ø§Ù„Ø´Ù‡Ø±ÙŠ</td></tr>
                <tr><td>Ù¢</td><td>ÙÙŠØµÙ„ Ù…Ø­Ù…Ø¯ Ø§Ù„Ø±Ø´ÙŠØ¯ÙŠ</td></tr>
                <tr><td>Ù£</td><td>ÙØ§Ø±Ø³ Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¹ØªÙŠØ¨ÙŠ</td></tr>
                <tr><td>Ù¤</td><td>Ù‡Ø§Ø¯ÙŠ Ø¨Ù† Ù†Ø§ØµØ± Ø§Ù„Ù‡Ø§Ø¬Ø±ÙŠ</td></tr>
                <tr><td>Ù¥</td><td>Ù…Ù‡Ù†Ø¯ Ù…Ø·Ù„Ù‚ Ø§Ù„Ø¹ØªÙŠØ¨ÙŠ</td></tr>
                <tr><td>Ù¦</td><td>Ø§Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø¹Ø¨Ø¯Ø§Ù„Ø­Ù…ÙŠØ¯ Ø§Ù„Ø¹Ù„ÙŠÙˆÙŠ</td></tr>
                <tr><td>Ù§</td><td>Ù…Ø­Ù…Ø¯ Ø­Ù…Ø¯ Ø§Ù„Ù…ØºØ§Ù…Ø³</td></tr>
                <tr><td>Ù¨</td><td>Ø¬Ù‡Ø§Ø¯ Ø®Ø§Ù„Ø¯ Ø§Ù„Ø«Ù†ÙŠØ§Ù†</td></tr>
                <tr><td>Ù©</td><td>Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø¨Ù† Ù…Ø§Ø¬Ø¯ Ø§Ù„Ù…ÙˆØ²Ø§Ù†</td></tr>
                <tr><td>Ù¡Ù </td><td>Ø¹Ù…Ø± Ø¨Ù† Ù…Ø§Ø¬Ø¯ Ø§Ù„Ù…ÙˆØ²Ø§Ù†</td></tr>
             <tr><td>Ù¡Ù¡</td><td> Ø§Ù†Ø³ ØµÙ„Ø§Ø­ Ø§Ù„Ù‚Ø­Ø·Ø§Ù†ÙŠ</td></tr>
            </tbody>
        </table>
    </section>

    <script>
        const canvas = document.getElementById('battleMap');
        const ctx = canvas.getContext('2d');

        // Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø®Ø±ÙŠØ·Ø©
        const elements = [
            { name: "Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø©", x: 250, y: 200, width: 500, height: 300, color: '#bdc3c7', info: "Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø© Ù‡ÙŠ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„ØªÙŠ Ù‡Ø§Ø¬Ø± Ø¥Ù„ÙŠÙ‡Ø§ Ø§Ù„Ù†Ø¨ÙŠ Ù…Ø­Ù…Ø¯ ï·º Ø¨Ø¹Ø¯ Ø£Ù† Ø§Ø¹ØªØµÙ… Ø§Ù„Ù…Ø³Ù„Ù…ÙˆÙ† ÙÙŠÙ‡Ø§ØŒ ÙˆÙƒØ§Ù†Øª Ù…Ø±ÙƒØ² Ø§Ù„Ø¯ÙˆÙ„Ø© Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ© ÙÙŠ Ø°Ù„Ùƒ Ø§Ù„ÙˆÙ‚Øª." },
            { name: "Ø§Ù„Ù…Ø³Ø¬Ø¯ Ø§Ù„Ù†Ø¨ÙˆÙŠ", x: 375, y: 275, width: 250, height: 150, color: '#f1c40f', info: "ÙƒØ§Ù† Ø§Ù„Ù…Ø³Ø¬Ø¯ Ø§Ù„Ù†Ø¨ÙˆÙŠ Ù…Ø±ÙƒØ² Ø§Ù„Ù‚Ø±Ø§Ø± Ø®Ù„Ø§Ù„ Ø§Ù„ØºØ²ÙˆØ©ØŒ Ø­ÙŠØ« Ø§Ø¬ØªÙ…Ø¹ Ø§Ù„Ù…Ø³Ù„Ù…ÙˆÙ† ÙÙŠÙ‡ ÙˆØ§Ø³ØªØ´Ø§Ø±ÙˆØ§ Ø§Ù„Ù†Ø¨ÙŠ Ù…Ø­Ù…Ø¯ ï·º Ø­ÙˆÙ„ ÙƒÙŠÙÙŠØ© Ù…ÙˆØ§Ø¬Ù‡Ø© Ø¬ÙŠØ´ Ø§Ù„Ù…Ø´Ø±ÙƒÙŠÙ†." },
            { name: "Ø¬Ø¨Ù„ Ø¹ÙŠØ±", x: 250, y: 500, width: 449, height: 100, color: '#333333', info: "Ø¬Ø¨Ù„ Ø¹ÙŠØ± Ù‡Ùˆ Ø§Ù„Ø¬Ø¨Ù„ Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠ Ø§Ù„Ø°ÙŠ ÙƒØ§Ù† ÙŠØ­Ù…ÙŠ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ù…Ù† Ø§Ù„Ø¬Ù†ÙˆØ¨ØŒ ÙˆÙŠØ¹ØªØ¨Ø± Ø£Ø­Ø¯ Ø§Ù„Ø¬Ø¨Ø§Ù„ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ© Ø§Ù„ØªÙŠ Ø³Ø§Ø¹Ø¯Øª ÙÙŠ Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©." },
            { name: "Ø­Ø±Ø© Ø¬Ø¨Ù„ ÙˆØ¨Ø±Ø©", x: 120, y: 100, width: 130, height: 400, color: '#444444', info: "Ø­Ø±Ø© Ø¬Ø¨Ù„ ÙˆØ¨Ø±Ø© Ù‡ÙŠ Ø§Ù„Ø¬Ø¨Ù„ Ø§Ù„ØºØ±Ø¨ÙŠ Ø§Ù„Ø°ÙŠ ÙƒØ§Ù† ÙŠØ­Ù…ÙŠ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ù…Ù† Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„ØºØ±Ø¨ÙŠØ©ØŒ ÙˆØªÙ‚Ø¹ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ù‚Ø±Ø¨ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø©." },
            { name: "Ø­Ø±Ø© Ø¬Ø¨Ù„ ÙˆØ§Ù‚Ù…", x: 700, y: 100, width: 130, height: 400, color: '#444444', info: "Ø­Ø±Ø© Ø¬Ø¨Ù„ ÙˆØ§Ù‚Ù… Ù‡ÙŠ Ø§Ù„Ø¬Ø¨Ù„ Ø§Ù„Ø´Ø±Ù‚ÙŠ Ø§Ù„Ø°ÙŠ ÙƒØ§Ù† ÙŠØ­Ù…ÙŠ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ù…Ù† Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ø´Ø±Ù‚ÙŠØ©ØŒ ÙˆÙƒØ§Ù†Øª Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ù…Ù…ØªØ¯Ø© Ù†Ø­Ùˆ Ø§Ù„Ø¬Ù†ÙˆØ¨ Ù…ØªØµÙ„Ø© Ø¨Ø¬Ø¨Ù„ Ø¹ÙŠØ±." },
            { name: "Ø§Ù„Ø®Ù†Ø¯Ù‚", x: 250, y: 50, width: 450, height: 50, color: '#8B4513', info: "Ø§Ù„Ø®Ù†Ø¯Ù‚ Ù‡Ùˆ Ø§Ù„Ø­ÙØ±Ø© Ø§Ù„ØªÙŠ Ø£Ù…Ø± Ø§Ù„Ù†Ø¨ÙŠ ï·º Ø§Ù„Ù…Ø³Ù„Ù…ÙŠÙ† Ø¨Ø­ÙØ±Ù‡Ø§ ÙÙŠ Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ© Ù…Ù† Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©ØŒ Ù„ØµØ¯ Ù‡Ø¬Ù…Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙƒÙŠÙ†." },
            { name: "Ø¬ÙŠØ´ Ø§Ù„Ù…Ø´Ø±ÙƒÙŠÙ† - 10 Ø¢Ù„Ø§Ù", x: 250, y: 30, width: 450, height: 30, color: '#e74c3c', info: "Ø¬Ø§Ø¡ Ø¬ÙŠØ´ Ø§Ù„Ù…Ø´Ø±ÙƒÙŠÙ† Ø¨Ù…Ø§ ÙŠÙ‚Ø§Ø±Ø¨ Ø§Ù„Ø¹Ø´Ø±Ø© Ø¢Ù„Ø§Ù Ù…Ù‚Ø§ØªÙ„ØŒ Ù„ÙƒÙ† Ø§Ù„Ø®Ù†Ø¯Ù‚ Ø­Ø§Ù„ Ø¯ÙˆÙ† Ø¯Ø®ÙˆÙ„Ù‡Ù… Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©ØŒ ÙˆØ¨Ø¹Ø¯ Ø£ÙŠØ§Ù… Ù…Ù† Ø§Ù„Ø­ØµØ§Ø±ØŒ Ø£Ø±Ø³Ù„ Ø§Ù„Ù„Ù‡ Ø±ÙŠØ­Ø§Ù‹ Ø´Ø¯ÙŠØ¯Ø© ÙØ´ØªØª ÙƒÙŠØ¯Ù‡Ù… ÙˆÙ‡Ø²Ù…Ù‡Ù…." },
        ];

        function drawMap() {
            if (!ctx) return;
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            elements.forEach(el => {
                ctx.fillStyle = el.color;
                ctx.fillRect(el.x, el.y, el.width, el.height);
                ctx.fillStyle = "#ffffff";
                ctx.font = "14px Arial";
                const textWidth = ctx.measureText(el.name).width;
                const centerX = el.x + (el.width - textWidth) / 2;
                const centerY = el.y + (el.height + 14) / 2;

                if (el.name === "Ø§Ù„Ù…Ø³Ø¬Ø¯ Ø§Ù„Ù†Ø¨ÙˆÙŠ") {
                    ctx.fillText(el.name, el.x + (el.width - textWidth) / 2, el.y + 25);
                    ctx.fillStyle = "#000";
                    ctx.font = "16px Arial";
                    ctx.fillText("ğŸ•Œ", el.x + el.width/2 - 10, el.y + 90);
                    ctx.fillStyle = "#000";
                    ctx.font = "bold 16px Arial";
                    const cityName = "Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø©";
                    const cityWidth = ctx.measureText(cityName).width;
                    const cityX = el.x + (el.width - cityWidth) / 2;
                    const cityY = el.y - 10;
                    ctx.fillText(cityName, cityX, cityY);
                } else if (el.name === "Ø­Ø±Ø© Ø¬Ø¨Ù„ ÙˆØ§Ù‚Ù…" || el.name === "Ø­Ø±Ø© Ø¬Ø¨Ù„ ÙˆØ¨Ø±Ø©") {
                    ctx.fillText(el.name, centerX + 35, centerY);
                } else {
                    ctx.fillText(el.name, centerX, centerY);
                }
            });
        }

        canvas.addEventListener('click', (e) => {
            const rect = canvas.getBoundingClientRect();
            const mouseX = e.clientX - rect.left;
            const mouseY = e.clientY - rect.top;
            for (let el of elements) {
                if (
                    mouseX >= el.x &&
                    mouseX <= el.x + el.width &&
                    mouseY >= el.y &&
                    mouseY <= el.y + el.height
                ) {
                    showPopup(el.name, el.info);
                    break;
                }
            }
        });

        function showPopup(title, text) {
            document.getElementById('popupTitle').innerText = title;
            document.getElementById('popupText').innerText = text;
            document.getElementById('infoPopup').style.display = 'block';
        }

        function toggleMap() {
            const container = document.getElementById('map-container');
            const isVisible = container.style.display !== 'none';
            container.style.display = isVisible ? 'none' : 'block';

            if (!isVisible) {
                setTimeout(() => {
                    drawMap();
                }, 500);
            }
        }

        function downloadMap() {
            const link = document.createElement('a');
            link.download = 'Ø§Ù„Ø®Ø±ÙŠØ·Ø©_Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠÙ‡_Ù„ØºØ²ÙˆØ©_Ø§Ù„Ø®Ù†Ø¯Ù‚.png';
            link.href = canvas.toDataURL('image/png');
            link.click();
        }

        function startTour() {
            const targets = ['#intro', '#mountains', '#mosque', '#trench', '#enemy'];
            let i = 0;
            function scrollToNext() {
                if (i < targets.length) {
                    document.querySelector(targets[i]).scrollIntoView({ behavior: 'smooth' });
                    i++;
                    setTimeout(scrollToNext, 3000);
                }
            }
            scrollToNext();
        }

        function toggleDarkMode() {
            const darkBtn = document.querySelector('.dark-mode-btn');
            const icon = darkBtn.querySelector('i');
            const text = darkBtn.querySelector('span');

            document.body.classList.toggle('dark-mode');

            if (document.body.classList.contains('dark-mode')) {
                icon.classList.remove('fa-moon');
                icon.classList.add('fa-sun');
                text.textContent = 'Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ';
            } else {
                icon.classList.remove('fa-sun');
                icon.classList.add('fa-moon');
                text.textContent = 'Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ';
            }

            if (document.getElementById('map-container').style.display !== 'none') {
                drawMap();
            }
        }

        window.addEventListener('load', drawMap);
        window.addEventListener('resize', () => {
            if (document.getElementById('map-container').style.display !== 'none') {
                drawMap();
            }
        });

        // Ø²Ø± Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø¹Ù„Ù‰
        window.addEventListener('scroll', () => {
            const btn = document.getElementById('backToTop');
            btn.style.display = (window.pageYOffset > 300) ? 'block' : 'none';
        });

        document.getElementById('backToTop').addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªÙ†Ø´ÙŠØ· Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¹Ù†Ø¯ Ø§Ù„Ù…Ø±ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù‚Ø§Ø·Ø¹
        const sections = document.querySelectorAll("section");
        const observer = new IntersectionObserver(entries => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add("active");
                }
            });
        }, { threshold: 0.3 });

        sections.forEach(section => observer.observe(section));
    </script>
</body>
</html>